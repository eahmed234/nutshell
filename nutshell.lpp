%{
    #include <string.h>
    #include "nutshell.tab.hpp"
%}

%option noyywrap

%%

"bye"               { return EXIT; }
[~]                 { return TILDE; }
\"(\\.|[^"\\])*\"   { yylval.val = strdup(yytext); return WORD; }
[^ &<>\|\\\"\n\t]+  { yylval.val = strdup(yytext); return WORD; }
[\n]                { return STOP; }
<<EOF>>             { return 0; }
[ \t]+              { }
.                   { cout << "Unrecognized token starting with " << yytext[0] << endl; }

%%